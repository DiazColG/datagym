<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Activo - DataGym</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="workout-activo.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="workout-active-body">
    <div class="workout-header-bar">
        <div class="header-left">
            <button class="btn-back-workout" id="btnBackWorkout">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="workout-title">
                <h2 id="workoutTitle">Cargando...</h2>
                <span id="workoutSubtitle" class="workout-subtitle"></span>
            </div>
        </div>
        <div class="workout-timer" id="workoutTimer">
            <i class="fas fa-clock"></i>
            <span id="timerDisplay">00:00</span>
        </div>
    </div>

    <div class="workout-main-content">
        <div class="exercise-progress-bar">
            <div class="progress-info">
                <span>Ejercicio <strong id="currentExerciseNum">1</strong> de <strong id="totalExercisesNum">5</strong></span>
            </div>
            <div class="progress-track">
                <div class="progress-fill-bar" id="progressFillBar"></div>
            </div>
        </div>

        <div class="current-exercise-card" id="currentExerciseCard">
            <div class="exercise-header-info">
                <div class="exercise-icon-name">
                    <span class="exercise-emoji" id="exerciseEmoji">ðŸ’ª</span>
                    <div>
                        <h3 id="exerciseName">Press de Banca</h3>
                        <p id="exerciseMuscle">PECHO</p>
                    </div>
                </div>
                <div class="previous-data" id="previousDataBox">
                    <i class="fas fa-history"></i>
                    <div>
                        <small>Ãšltima vez</small>
                        <strong id="previousBest">80kg Ã— 10</strong>
                    </div>
                </div>
            </div>

            <div class="sets-tracker" id="setsTracker"></div>

            <div class="current-set-panel" id="currentSetPanel">
                <div class="set-number-badge">
                    <span>Serie</span>
                    <strong id="currentSetNumber">1</strong>
                </div>

                <div class="weight-selector">
                    <h4>Peso (kg)</h4>
                    <div class="weight-controls">
                        <button class="btn-weight-adj" data-change="-5">-5</button>
                        <button class="btn-weight-adj" data-change="-2.5">-2.5</button>
                        <div class="weight-display" id="weightDisplay">0</div>
                        <button class="btn-weight-adj" data-change="2.5">+2.5</button>
                        <button class="btn-weight-adj" data-change="5">+5</button>
                    </div>
                    <input type="number" id="weightInput" class="weight-input-direct" placeholder="0" step="0.5">
                </div>

                <div class="reps-selector">
                    <h4>Repeticiones</h4>
                    <div class="reps-grid" id="repsGrid"></div>
                    <input type="number" id="repsInput" class="reps-input-direct" placeholder="0" min="1" max="50">
                </div>

                <button class="btn-complete-set" id="btnCompleteSet">
                    <i class="fas fa-check-circle"></i>
                    Completar Serie
                </button>
            </div>

            <div class="exercise-navigation">
                <button class="btn-nav-exercise" id="btnPrevExercise" disabled>
                    <i class="fas fa-chevron-left"></i>
                    Anterior
                </button>
                <button class="btn-nav-exercise primary" id="btnNextExercise">
                    Siguiente
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <div class="workout-notes-section">
            <textarea id="workoutNotes" placeholder="Notas del entrenamiento..."></textarea>
        </div>

        <div class="workout-actions-footer">
            <button class="btn-finish-workout" id="btnFinishWorkout">
                <i class="fas fa-flag-checkered"></i>
                Finalizar Entrenamiento
            </button>
        </div>
    </div>

    <div class="modal-overlay" id="modalFinishWorkout">
        <div class="modal-content-finish">
            <div class="modal-icon-success">
                <i class="fas fa-trophy"></i>
            </div>
            <h2>Â¡Entrenamiento Completado!</h2>
            <div class="workout-summary" id="workoutSummary">
                <div class="summary-stat">
                    <i class="fas fa-clock"></i>
                    <div>
                        <strong id="summaryDuration">45 min</strong>
                        <span>DuraciÃ³n</span>
                    </div>
                </div>
                <div class="summary-stat">
                    <i class="fas fa-weight-hanging"></i>
                    <div>
                        <strong id="summaryVolume">5,240 kg</strong>
                        <span>Volumen Total</span>
                    </div>
                </div>
                <div class="summary-stat">
                    <i class="fas fa-fire"></i>
                    <div>
                        <strong id="summaryCalories">320 kcal</strong>
                        <span>CalorÃ­as</span>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="btnCancelFinish">Volver</button>
                <button class="btn btn-success btn-large" id="btnConfirmFinish">
                    <i class="fas fa-check"></i> Confirmar
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts de Firebase y mÃ³dulos -->
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="auth.js"></script>
    <script type="module" src="exercises-db.js"></script>
    <script type="module" src="rutinas-manager.js"></script>
    <script type="module" src="workout-manager.js"></script>
    <script type="module" src="workout-calculator.js"></script>
    <script type="module" src="records-manager.js"></script>
    <script type="module" src="workout-activo.js"></script>
</body>
</html>
